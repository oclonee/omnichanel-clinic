<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Documenta√ß√£o - Sistema Omnichannel de Sa√∫de</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f5f5f5;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px 0;
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .tabs {
            display: flex;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            overflow-x: auto;
        }

        .tab-button {
            padding: 15px 25px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            color: #666;
            transition: all 0.3s ease;
            white-space: nowrap;
            border-bottom: 3px solid transparent;
        }

        .tab-button:hover {
            background: #f8f9fa;
            color: #333;
        }

        .tab-button.active {
            color: #667eea;
            border-bottom-color: #667eea;
            background: #f8f9fa;
        }

        .tab-content {
            display: none;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .tab-content.active {
            display: block;
        }

        .tab-content h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.8rem;
        }

        .tab-content h3 {
            color: #555;
            margin: 25px 0 15px 0;
            font-size: 1.4rem;
        }

        .tab-content p {
            margin-bottom: 15px;
            text-align: justify;
        }

        .tab-content ul, .tab-content ol {
            margin: 15px 0 15px 30px;
        }

        .tab-content li {
            margin-bottom: 8px;
        }

        .code-block {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
        }

        .highlight {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
        }

        .warning {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
        }

        .success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .feature-card {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            transition: transform 0.2s ease;
        }

        .feature-card:hover {
            transform: translateY(-2px);
        }

        .feature-card h4 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        .table th, .table td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }

        .table th {
            background: #f8f9fa;
            font-weight: 600;
        }

        .table tr:nth-child(even) {
            background: #f9f9f9;
        }

        @media (max-width: 768px) {
            .tabs {
                flex-direction: column;
            }
            
            .tab-button {
                border-bottom: none;
                border-right: 3px solid transparent;
            }
            
            .tab-button.active {
                border-right-color: #667eea;
                border-bottom-color: transparent;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="container">
            <h1>üìã Documenta√ß√£o Completa</h1>
            <p>Sistema Omnichannel de Sa√∫de - Cl√≠nica S√£o Lucas</p>
        </div>
    </div>

    <div class="container">
        <div class="tabs">
            <button class="tab-button active" onclick="openTab('overview')">Vis√£o Geral</button>
            <button class="tab-button" onclick="openTab('users')">Usu√°rios e Permiss√µes</button>
            <button class="tab-button" onclick="openTab('authentication')">Autentica√ß√£o</button>
            <button class="tab-button" onclick="openTab('dashboard')">Dashboard</button>
            <button class="tab-button" onclick="openTab('attendance')">Atendimento</button>
            <button class="tab-button" onclick="openTab('management')">Gest√£o</button>
            <button class="tab-button" onclick="openTab('database')">Banco de Dados</button>
            <button class="tab-button" onclick="openTab('deployment')">Deploy e Configura√ß√£o</button>
        </div>

        <!-- Vis√£o Geral -->
        <div id="overview" class="tab-content active">
            <h2>üè• Vis√£o Geral do Sistema</h2>
            
            <p>O Sistema Omnichannel de Sa√∫de √© uma plataforma completa desenvolvida para gerenciar atendimentos m√©dicos atrav√©s de m√∫ltiplos canais de comunica√ß√£o, oferecendo uma experi√™ncia unificada para pacientes e profissionais de sa√∫de.</p>

            <h3>üéØ Objetivos Principais</h3>
            <ul>
                <li>Centralizar atendimentos de m√∫ltiplos canais (WhatsApp, Instagram, E-mail, Telefone)</li>
                <li>Gerenciar filas de atendimento com prioriza√ß√£o inteligente</li>
                <li>Monitorar performance da equipe em tempo real</li>
                <li>Fornecer dashboard gerencial com m√©tricas importantes</li>
                <li>Facilitar escala√ß√£o e reatribui√ß√£o de casos cr√≠ticos</li>
            </ul>

            <h3>üöÄ Tecnologias Utilizadas</h3>
            <div class="feature-grid">
                <div class="feature-card">
                    <h4>Frontend</h4>
                    <ul>
                        <li>React 18 + TypeScript</li>
                        <li>Vite (Build Tool)</li>
                        <li>Tailwind CSS</li>
                        <li>shadcn/ui Components</li>
                    </ul>
                </div>
                <div class="feature-card">
                    <h4>Backend</h4>
                    <ul>
                        <li>Supabase (PostgreSQL)</li>
                        <li>Row Level Security (RLS)</li>
                        <li>Real-time Subscriptions</li>
                        <li>Edge Functions</li>
                    </ul>
                </div>
                <div class="feature-card">
                    <h4>Autentica√ß√£o</h4>
                    <ul>
                        <li>Supabase Auth</li>
                        <li>JWT Tokens</li>
                        <li>Role-based Access</li>
                        <li>Email Confirmation</li>
                    </ul>
                </div>
            </div>

            <h3>üì± Canais Suportados</h3>
            <ul>
                <li><strong>WhatsApp:</strong> Integra√ß√£o via API oficial</li>
                <li><strong>Instagram:</strong> Mensagens diretas e coment√°rios</li>
                <li><strong>E-mail:</strong> Sistema de tickets integrado</li>
                <li><strong>Telefone:</strong> Registro de chamadas e retornos</li>
            </ul>
        </div>

        <!-- Usu√°rios e Permiss√µes -->
        <div id="users" class="tab-content">
            <h2>üë• Usu√°rios e Permiss√µes</h2>
            
            <h3>üîê Tipos de Usu√°rio</h3>
            <div class="table">
                <table>
                    <thead>
                        <tr>
                            <th>Tipo</th>
                            <th>Descri√ß√£o</th>
                            <th>Permiss√µes</th>
                            <th>Capacidade M√°xima</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Admin</strong></td>
                            <td>Administrador do sistema</td>
                            <td>Total (todas as funcionalidades)</td>
                            <td>Ilimitada</td>
                        </tr>
                        <tr>
                            <td><strong>Gerente</strong></td>
                            <td>Supervisor da equipe</td>
                            <td>Gest√£o de equipe, relat√≥rios, escala√ß√£o</td>
                            <td>8 conversas simult√¢neas</td>
                        </tr>
                        <tr>
                            <td><strong>Atendente</strong></td>
                            <td>Profissional de atendimento</td>
                            <td>Atendimento direto, hist√≥rico</td>
                            <td>5 conversas simult√¢neas</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h3>üìù Cria√ß√£o de Usu√°rios</h3>
            <ol>
                <li>Acesse a p√°gina de autentica√ß√£o (<code>/auth</code>)</li>
                <li>Clique em "Criar Conta"</li>
                <li>Preencha os dados obrigat√≥rios:
                    <ul>
                        <li>Nome completo</li>
                        <li>E-mail v√°lido</li>
                        <li>Senha (m√≠nimo 6 caracteres)</li>
                    </ul>
                </li>
                <li>Confirme o e-mail (se habilitado)</li>
                <li>Fa√ßa login com as credenciais</li>
            </ol>

            <div class="highlight">
                <strong>üí° Dica:</strong> Para contas de demonstra√ß√£o, desabilite a confirma√ß√£o de e-mail nas configura√ß√µes do Supabase.
            </div>

            <h3>‚öôÔ∏è Atribui√ß√£o de Fun√ß√µes</h3>
            <p>A fun√ß√£o do usu√°rio √© definida automaticamente no banco de dados atrav√©s do trigger <code>handle_new_user()</code>:</p>
            
            <div class="code-block">
-- Trigger autom√°tico para novos usu√°rios
CREATE OR REPLACE FUNCTION handle_new_user()
RETURNS TRIGGER AS $$
BEGIN
    INSERT INTO public.profiles (id, email, name, role)
    VALUES (
        NEW.id,
        NEW.email,
        COALESCE(NEW.raw_user_meta_data->>'name', 'Usu√°rio'),
        'atendente' -- Fun√ß√£o padr√£o
    );
    RETURN NEW;
END;
$$ LANGUAGE plpgsql SECURITY DEFINER;
            </div>

            <h3>üîÑ Altera√ß√£o de Fun√ß√£o</h3>
            <p>Para alterar a fun√ß√£o de um usu√°rio existente:</p>
            
            <div class="code-block">
-- Atualizar fun√ß√£o do usu√°rio
UPDATE public.profiles 
SET role = 'gerente' 
WHERE email = 'usuario@exemplo.com';

-- Verificar altera√ß√£o
SELECT email, name, role FROM public.profiles 
WHERE email = 'usuario@exemplo.com';
            </div>
        </div>

        <!-- Autentica√ß√£o -->
        <div id="authentication" class="tab-content">
            <h2>üîê Sistema de Autentica√ß√£o</h2>
            
            <h3>üèóÔ∏è Arquitetura de Autentica√ß√£o</h3>
            <p>O sistema utiliza Supabase Auth com as seguintes caracter√≠sticas:</p>
            <ul>
                <li><strong>JWT Tokens:</strong> Autentica√ß√£o baseada em tokens</li>
                <li><strong>Row Level Security:</strong> Controle de acesso granular</li>
                <li><strong>Refresh Tokens:</strong> Renova√ß√£o autom√°tica de sess√£o</li>
                <li><strong>Role-based Access:</strong> Controle por fun√ß√£o do usu√°rio</li>
            </ul>

            <h3>üìã Configura√ß√£o do Supabase</h3>
            <ol>
                <li>Acesse o Dashboard do Supabase</li>
                <li>V√° para <strong>Authentication > Settings</strong></li>
                <li>Configure as seguintes op√ß√µes:
                    <ul>
                        <li><strong>Enable email confirmations:</strong> Desabilitar para demonstra√ß√£o</li>
                        <li><strong>JWT expiry:</strong> 3600 segundos (1 hora)</li>
                        <li><strong>Refresh token expiry:</strong> 2592000 segundos (30 dias)</li>
                    </ul>
                </li>
            </ol>

            <h3>üîß Vari√°veis de Ambiente</h3>
            <p>Configure as seguintes vari√°veis no arquivo <code>.env</code>:</p>
            
            <div class="code-block">
# Supabase Configuration
VITE_SUPABASE_URL=https://seu-projeto.supabase.co
VITE_SUPABASE_ANON_KEY=sua-chave-anonima-aqui
            </div>

            <h3>üö® Problemas Comuns e Solu√ß√µes</h3>
            
            <div class="warning">
                <h4>‚ùå Erro 422 - Unprocessable Content</h4>
                <p><strong>Causa:</strong> E-mail n√£o confirmado ou perfil n√£o criado</p>
                <p><strong>Solu√ß√£o:</strong></p>
                <ol>
                    <li>Desabilitar confirma√ß√£o de e-mail no Supabase</li>
                    <li>Confirmar e-mail manualmente via SQL</li>
                    <li>Verificar se o perfil foi criado na tabela <code>profiles</code></li>
                </ol>
            </div>

            <div class="success">
                <h4>‚úÖ Login Funcionando</h4>
                <p>Ap√≥s resolver os problemas de autentica√ß√£o, o usu√°rio deve conseguir:</p>
                <ul>
                    <li>Acessar todas as p√°ginas protegidas</li>
                    <li>Ver seu nome e fun√ß√£o no cabe√ßalho</li>
                    <li>Fazer logout corretamente</li>
                    <li>Manter a sess√£o ativa</li>
                </ul>
            </div>
        </div>

        <!-- Dashboard -->
        <div id="dashboard" class="tab-content">
            <h2>üìä Dashboard Principal</h2>
            
            <h3>üéØ Funcionalidades do Dashboard</h3>
            <div class="feature-grid">
                <div class="feature-card">
                    <h4>üìà KPIs Principais</h4>
                    <ul>
                        <li>Conversas ativas</li>
                        <li>Tempo m√©dio de resposta</li>
                        <li>Taxa de resolu√ß√£o</li>
                        <li>Satisfa√ß√£o m√©dia</li>
                    </ul>
                </div>
                <div class="feature-card">
                    <h4>üî¥ Conversas Cr√≠ticas</h4>
                    <ul>
                        <li>Monitoramento em tempo real</li>
                        <li>Prioriza√ß√£o autom√°tica</li>
                        <li>A√ß√µes de interven√ß√£o</li>
                        <li>Hist√≥rico de escala√ß√µes</li>
                    </ul>
                </div>
                <div class="feature-card">
                    <h4>üì± Status dos Canais</h4>
                    <ul>
                        <li>Indicadores online/offline</li>
                        <li>Lat√™ncia de resposta</li>
                        <li>Volume de mensagens</li>
                        <li>Alertas de falha</li>
                    </ul>
                </div>
            </div>

            <h3>üé® Interface do Usu√°rio</h3>
            <p>O dashboard √© responsivo e adapta-se a diferentes tamanhos de tela:</p>
            <ul>
                <li><strong>Desktop:</strong> Layout em grid com 4 colunas para KPIs</li>
                <li><strong>Tablet:</strong> Layout adaptativo com 2 colunas</li>
                <li><strong>Mobile:</strong> Layout em coluna √∫nica</li>
            </ul>

            <h3>üîÑ Atualiza√ß√µes em Tempo Real</h3>
            <p>Os dados s√£o atualizados automaticamente a cada 30 segundos atrav√©s de:</p>
            <ul>
                <li>Supabase Real-time Subscriptions</li>
                <li>Polling autom√°tico de m√©tricas</li>
                <li>WebSocket para notifica√ß√µes</li>
                <li>Cache local para performance</li>
            </ul>
        </div>

        <!-- Atendimento -->
        <div id="attendance" class="tab-content">
            <h2>üí¨ Sistema de Atendimento</h2>
            
            <h3>üéØ Funcionalidades Principais</h3>
            <ul>
                <li><strong>Fila Inteligente:</strong> Prioriza√ß√£o autom√°tica baseada em crit√©rios</li>
                <li><strong>Atribui√ß√£o Autom√°tica:</strong> Distribui√ß√£o balanceada entre agentes</li>
                <li><strong>Hist√≥rico Completo:</strong> Rastreamento de todas as intera√ß√µes</li>
                <li><strong>Respostas R√°pidas:</strong> Templates e respostas autom√°ticas</li>
            </ul>

            <h3>üìã Estrutura da Fila</h3>
            <div class="table">
                <table>
                    <thead>
                        <tr>
                            <th>Campo</th>
                            <th>Tipo</th>
                            <th>Descri√ß√£o</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>id</td>
                            <td>UUID</td>
                            <td>Identificador √∫nico da conversa</td>
                        </tr>
                        <tr>
                            <td>patient_id</td>
                            <td>UUID</td>
                            <td>ID do paciente</td>
                        </tr>
                        <tr>
                            <td>channel</td>
                            <td>String</td>
                            <td>Canal de origem (WhatsApp, Instagram, etc.)</td>
                        </tr>
                        <tr>
                            <td>priority</td>
                            <td>Integer</td>
                            <td>Prioridade (1-10, 10 = m√°xima)</td>
                        </tr>
                        <tr>
                            <td>waiting_since</td>
                            <td>Timestamp</td>
                            <td>Momento de entrada na fila</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h3>‚ö° Algoritmo de Prioriza√ß√£o</h3>
            <p>A prioriza√ß√£o √© calculada automaticamente considerando:</p>
            <ol>
                <li><strong>Urg√™ncia m√©dica:</strong> Palavras-chave cr√≠ticas</li>
                <li><strong>Tempo de espera:</strong> Quanto mais tempo, maior prioridade</li>
                <li><strong>Canal:</strong> WhatsApp e telefone t√™m prioridade sobre e-mail</li>
                <li><strong>Hist√≥rico:</strong> Pacientes recorrentes</li>
                <li><strong>Volume:</strong> Pacientes com m√∫ltiplas mensagens</li>
            </ol>

            <h3>ü§ñ Atribui√ß√£o Autom√°tica</h3>
            <p>O sistema atribui conversas automaticamente baseado em:</p>
            <ul>
                <li><strong>Disponibilidade:</strong> Agente online e com capacidade</li>
                <li><strong>Especialidade:</strong> √Årea m√©dica do agente</li>
                <li><strong>Carga atual:</strong> Menor carga = prioridade</li>
                <li><strong>Rating:</strong> Melhor avalia√ß√£o = prioridade</li>
                <li><strong>Idioma:</strong> Compatibilidade lingu√≠stica</li>
            </ul>
        </div>

        <!-- Gest√£o -->
        <div id="management" class="tab-content">
            <h2>üë®‚Äçüíº Painel de Gest√£o</h2>
            
            <h3>üìä Abas Dispon√≠veis</h3>
            <div class="feature-grid">
                <div class="feature-card">
                    <h4>üè† Dashboard</h4>
                    <p>Vis√£o geral com KPIs, conversas cr√≠ticas e status dos canais</p>
                </div>
                <div class="feature-card">
                    <h4>üë• Gest√£o de Equipe</h4>
                    <p>Monitoramento de performance individual e estat√≠sticas agregadas</p>
                </div>
                <div class="feature-card">
                    <h4>üìà Relat√≥rios</h4>
                    <p>An√°lise detalhada de m√©tricas e indicadores de desempenho</p>
                </div>
                <div class="feature-card">
                    <h4>‚öôÔ∏è Configura√ß√µes</h4>
                    <p>Personaliza√ß√£o de par√¢metros e comportamentos do sistema</p>
                </div>
            </div>

            <h3>üî¥ Sistema de Interven√ß√£o</h3>
            <p>Quando uma conversa cr√≠tica √© identificada, o gerente pode:</p>
            <ol>
                <li><strong>Escalar:</strong> Marcar como cr√≠tica e priorizar</li>
                <li><strong>Reatribuir:</strong> Transferir para outro agente</li>
                <li><strong>Monitorar:</strong> Acompanhar em tempo real</li>
                <li><strong>Intervir:</strong> Tomar controle direto</li>
            </ol>

            <h3>üìä M√©tricas de Equipe</h3>
            <div class="table">
                <table>
                    <thead>
                        <tr>
                            <th>M√©trica</th>
                            <th>Descri√ß√£o</th>
                            <th>Meta</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Utiliza√ß√£o</td>
                            <td>Porcentagem de capacidade utilizada</td>
                            <td>70-80%</td>
                        </tr>
                        <tr>
                            <td>Rating</td>
                            <td>Avalia√ß√£o m√©dia do paciente</td>
                            <td>4.5+/5</td>
                        </tr>
                        <tr>
                            <td>Tempo de Resposta</td>
                            <td>Tempo m√©dio para primeira resposta</td>
                            <td>&lt; 5 min</td>
                        </tr>
                        <tr>
                            <td>Taxa de Resolu√ß√£o</td>
                            <td>Conversas resolvidas na primeira intera√ß√£o</td>
                            <td>&gt; 90%</td>
                        </tr>
                    </tbody>
                </table>
            </div>

                         <h3>üéØ Indicadores de Performance</h3>
             <p>O sistema calcula automaticamente:</p>
             <ul>
                 <li><strong>Agentes Cr√≠ticos:</strong> Utiliza√ß√£o >80% (requer aten√ß√£o)</li>
                 <li><strong>Utiliza√ß√£o M√©dia:</strong> M√©dia ponderada da equipe</li>
                 <li><strong>Rating M√©dio:</strong> Avalia√ß√£o agregada da equipe</li>
                 <li><strong>Efici√™ncia:</strong> Conversas por hora por agente</li>
             </ul>

             <h3>‚öôÔ∏è Configura√ß√£o de Agentes</h3>
             <p>Cada agente pode ter suas configura√ß√µes personalizadas atrav√©s do bot√£o "Configurar":</p>
             <ul>
                 <li><strong>Capacidade M√°xima:</strong> Ajustar n√∫mero de conversas simult√¢neas (1-10)</li>
                 <li><strong>Fun√ß√£o:</strong> Alterar entre Atendente e Gerente</li>
                 <li><strong>Status Online:</strong> Marcar agente como dispon√≠vel/indispon√≠vel</li>
                 <li><strong>Salvamento Autom√°tico:</strong> Altera√ß√µes s√£o aplicadas imediatamente</li>
             </ul>
             
             <div class="highlight">
                 <strong>üí° Dica:</strong> Use a configura√ß√£o de agentes para otimizar a distribui√ß√£o de carga e ajustar permiss√µes conforme necess√°rio.
             </div>
        </div>

        <!-- Banco de Dados -->
        <div id="database" class="tab-content">
            <h2>üóÑÔ∏è Estrutura do Banco de Dados</h2>
            
            <h3>üèóÔ∏è Tabelas Principais</h3>
            <div class="table">
                <table>
                    <thead>
                        <tr>
                            <th>Tabela</th>
                            <th>Prop√≥sito</th>
                            <th>Relacionamentos</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>profiles</strong></td>
                            <td>Perfis dos usu√°rios</td>
                            <td>auth.users (1:1)</td>
                        </tr>
                        <tr>
                            <td><strong>patients</strong></td>
                            <td>Dados dos pacientes</td>
                            <td>conversations (1:N)</td>
                        </tr>
                        <tr>
                            <td><strong>conversations</strong></td>
                            <td>Conversas e atendimentos</td>
                            <td>patients, profiles, messages</td>
                        </tr>
                        <tr>
                            <td><strong>messages</strong></td>
                            <td>Mensagens individuais</td>
                            <td>conversations (N:1)</td>
                        </tr>
                        <tr>
                            <td><strong>channels</strong></td>
                            <td>Canais de comunica√ß√£o</td>
                            <td>conversations (1:N)</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h3>üîê Row Level Security (RLS)</h3>
            <p>Pol√≠ticas de seguran√ßa implementadas:</p>
            
            <div class="code-block">
-- Pol√≠tica para profiles
CREATE POLICY "Users can view own profile" ON profiles
    FOR SELECT USING (auth.uid() = id);

-- Pol√≠tica para conversations
CREATE POLICY "Users can view assigned conversations" ON conversations
    FOR SELECT USING (
        auth.uid() = assigned_agent_id OR 
        auth.uid() IN (
            SELECT id FROM profiles WHERE role = 'gerente'
        )
    );
            </div>

            <h3>‚ö° Triggers e Fun√ß√µes</h3>
            <ul>
                <li><strong>handle_new_user:</strong> Cria perfil automaticamente</li>
                <li><strong>update_updated_at_column:</strong> Atualiza timestamp</li>
                <li><strong>calculate_conversation_priority:</strong> Prioriza√ß√£o autom√°tica</li>
                <li><strong>notify_agent:</strong> Notifica√ß√µes em tempo real</li>
            </ul>

            <h3>üìä √çndices de Performance</h3>
            <div class="code-block">
-- √çndices para otimiza√ß√£o
CREATE INDEX idx_conversations_status ON conversations(status);
CREATE INDEX idx_conversations_priority ON conversations(priority);
CREATE INDEX idx_messages_conversation_id ON messages(conversation_id);
CREATE INDEX idx_profiles_role ON profiles(role);
            </div>
        </div>

        <!-- Deploy e Configura√ß√£o -->
        <div id="deployment" class="tab-content">
            <h2>üöÄ Deploy e Configura√ß√£o</h2>
            
            <h3>üìã Pr√©-requisitos</h3>
            <ul>
                <li><strong>Node.js:</strong> Vers√£o 18+</li>
                <li><strong>npm:</strong> Gerenciador de pacotes</li>
                <li><strong>Git:</strong> Controle de vers√£o</li>
                <li><strong>Supabase:</strong> Conta e projeto criado</li>
            </ul>

            <h3>üîß Instala√ß√£o Local</h3>
            <div class="code-block">
# Clone do reposit√≥rio
git clone [URL_DO_REPOSITORIO]
cd health-comm-unified-main

# Instala√ß√£o de depend√™ncias
npm install

# Configura√ß√£o das vari√°veis de ambiente
cp .env.example .env
# Editar .env com suas credenciais do Supabase

# Execu√ß√£o em modo desenvolvimento
npm run dev
            </div>

            <h3>üåê Deploy em Produ√ß√£o</h3>
            <p>Op√ß√µes recomendadas para deploy:</p>
            
            <div class="feature-grid">
                <div class="feature-card">
                    <h4>üöÄ Vercel</h4>
                    <ul>
                        <li>Deploy autom√°tico</li>
                        <li>SSL gratuito</li>
                        <li>CDN global</li>
                        <li>Integra√ß√£o com Git</li>
                    </ul>
                </div>
                <div class="feature-card">
                    <h4>‚òÅÔ∏è Netlify</h4>
                    <ul>
                        <li>Build autom√°tico</li>
                        <li>Formul√°rios integrados</li>
                        <li>Fun√ß√µes serverless</li>
                        <li>Preview deployments</li>
                    </ul>
                </div>
                <div class="feature-card">
                    <h4>üê≥ Docker</h4>
                    <ul>
                        <li>Containeriza√ß√£o</li>
                        <li>Portabilidade</li>
                        <li>Escalabilidade</li>
                        <li>Ambiente isolado</li>
                    </ul>
                </div>
            </div>

            <h3>‚öôÔ∏è Configura√ß√£o do Supabase</h3>
            <ol>
                <li><strong>Criar Projeto:</strong> Acesse supabase.com e crie novo projeto</li>
                <li><strong>Configurar Banco:</strong> Execute as migra√ß√µes SQL fornecidas</li>
                <li><strong>Configurar Auth:</strong> Ajuste as configura√ß√µes de autentica√ß√£o</li>
                <li><strong>Configurar RLS:</strong> Aplique as pol√≠ticas de seguran√ßa</li>
                <li><strong>Testar Conex√£o:</strong> Verifique se o frontend consegue conectar</li>
            </ol>

            <h3>üîç Troubleshooting</h3>
            
            <div class="warning">
                <h4>‚ùå Erro de Conex√£o com Supabase</h4>
                <p><strong>Verificar:</strong></p>
                <ul>
                    <li>URL e chave an√¥nima corretas</li>
                    <li>Projeto ativo e n√£o pausado</li>
                    <li>Pol√≠ticas RLS configuradas</li>
                    <li>Banco de dados acess√≠vel</li>
                </ul>
            </div>

            <div class="warning">
                <h4>‚ùå Erro de Build</h4>
                <p><strong>Verificar:</strong></p>
                <ul>
                    <li>Vers√£o do Node.js compat√≠vel</li>
                    <li>Depend√™ncias instaladas corretamente</li>
                    <li>Vari√°veis de ambiente configuradas</li>
                    <li>Arquivos de configura√ß√£o v√°lidos</li>
                </ul>
            </div>

            <h3>üì± Configura√ß√£o Mobile</h3>
            <p>Para aplica√ß√£o mobile (futuro):</p>
            <ul>
                <li><strong>PWA:</strong> Progressive Web App habilitado</li>
                <li><strong>Responsivo:</strong> Layout adaptativo para mobile</li>
                <li><strong>Offline:</strong> Cache de dados essenciais</li>
                <li><strong>Push Notifications:</strong> Alertas em tempo real</li>
            </ul>
        </div>
    </div>

    <script>
        function openTab(tabName) {
            // Esconder todas as abas
            var tabContents = document.getElementsByClassName('tab-content');
            for (var i = 0; i < tabContents.length; i++) {
                tabContents[i].classList.remove('active');
            }

            // Remover classe active de todos os bot√µes
            var tabButtons = document.getElementsByClassName('tab-button');
            for (var i = 0; i < tabButtons.length; i++) {
                tabButtons[i].classList.remove('active');
            }

            // Mostrar a aba selecionada
            document.getElementById(tabName).classList.add('active');

            // Adicionar classe active ao bot√£o clicado
            event.target.classList.add('active');
        }

        // Adicionar funcionalidade de busca
        document.addEventListener('DOMContentLoaded', function() {
            // Adicionar busca por texto nas abas
            var searchInput = document.createElement('input');
            searchInput.type = 'text';
            searchInput.placeholder = 'üîç Buscar na documenta√ß√£o...';
            searchInput.style.cssText = `
                width: 100%;
                padding: 12px;
                margin-bottom: 20px;
                border: 2px solid #e9ecef;
                border-radius: 8px;
                font-size: 16px;
                box-sizing: border-box;
            `;
            
            document.querySelector('.container').insertBefore(searchInput, document.querySelector('.tabs'));

            searchInput.addEventListener('input', function() {
                var searchTerm = this.value.toLowerCase();
                var tabContents = document.getElementsByClassName('tab-content');
                
                for (var i = 0; i < tabContents.length; i++) {
                    var content = tabContents[i];
                    var text = content.textContent.toLowerCase();
                    
                    if (text.includes(searchTerm)) {
                        content.style.display = 'block';
                        // Destacar texto encontrado
                        if (searchTerm.length > 2) {
                            highlightText(content, searchTerm);
                        }
                    } else if (searchTerm.length > 0) {
                        content.style.display = 'none';
                    } else {
                        content.style.display = 'block';
                        removeHighlights(content);
                    }
                }
            });
        });

        function highlightText(element, searchTerm) {
            removeHighlights(element);
            var regex = new RegExp(searchTerm, 'gi');
            element.innerHTML = element.innerHTML.replace(regex, '<mark style="background: yellow; padding: 2px;">$&</mark>');
        }

        function removeHighlights(element) {
            var marks = element.getElementsByTagName('mark');
            while (marks.length > 0) {
                var parent = marks[0].parentNode;
                parent.replaceChild(document.createTextNode(marks[0].textContent), marks[0]);
            }
        }
    </script>
</body>
</html>
